<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Authentication</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
        body{background:linear-gradient(135deg,#6a11cb 0%,#2575fc 100%);min-height:100vh;display:flex;justify-content:center;align-items:center;padding:20px;}
        .container{width:100%;max-width:900px;background:rgba(255,255,255,0.9);border-radius:20px;box-shadow:0 15px 35px rgba(0,0,0,0.2);overflow:hidden;display:flex;flex-direction:column;}
        .header{background:linear-gradient(to right,#6a11cb,#2575fc);color:white;text-align:center;padding:25px;position:relative;}
        .header h1{font-size:2.2rem;margin-bottom:10px;}
        .header p{opacity:.9;}
        .tabs{display:flex;background:#f1f3f6;}
        .tab{flex:1;text-align:center;padding:18px;font-size:1.2rem;font-weight:600;cursor:pointer;transition:.3s;color:#555;}
        .tab.active{background:white;color:#6a11cb;border-bottom:3px solid #6a11cb;}
        .form-container{padding:30px;}
        .form{display:none;}
        .form.active{display:block;animation:fadeIn .5s ease;}
        @keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
        .input-group{margin-bottom:20px;position:relative;}
        .input-group label{display:block;margin-bottom:8px;font-weight:500;color:#333;}
        .input-group input{width:100%;padding:15px;border:2px solid #ddd;border-radius:10px;font-size:1rem;transition:border .3s;}
        .input-group input:focus{border-color:#6a11cb;outline:none;}
        .input-group i{position:absolute;right:15px;top:45px;color:#777;}
        .btn{width:100%;padding:15px;background:linear-gradient(to right,#6a11cb,#2575fc);color:white;border:none;border-radius:10px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:.3s;}
        .btn:hover{transform:translateY(-2px);box-shadow:0 5px 15px rgba(106,17,203,0.4);}
        .message{margin-top:20px;padding:15px;border-radius:10px;text-align:center;display:none;}
        .success{background:#d4edda;color:#155724;border:1px solid #c3e6cb;}
        .error{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb;}
        .info{text-align:center;margin-top:20px;color:#666;}
        .info a{color:#6a11cb;text-decoration:none;font-weight:600;}
        @media(max-width:768px){.container{flex-direction:column;}.header h1{font-size:1.8rem;}.tab{padding:15px;font-size:1rem;}}
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>User Authentication</h1>
            <p>Register or login to access your account</p>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="register">Register</div>
            <div class="tab" data-tab="login">Login</div>
        </div>
        
        <div class="form-container">
            <!-- Register -->
            <form id="registerForm" class="form active">
                <div class="input-group">
                    <label for="regName">Full Name</label>
                    <input type="text" id="regName" placeholder="Enter your full name" required>
                    <i class="fas fa-user"></i>
                </div>
                <div class="input-group">
                    <label for="regUsername">Username</label>
                    <input type="text" id="regUsername" placeholder="Enter your username" required>
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="input-group">
                    <label for="regEmail">Email Address</label>
                    <input type="email" id="regEmail" placeholder="Enter your email" required>
                    <i class="fas fa-envelope"></i>
                </div>
                <div class="input-group">
                    <label for="regPassword">Password</label>
                    <input type="password" id="regPassword" placeholder="Create a password" required>
                    <i class="fas fa-lock"></i>
                </div>
                <button type="submit" class="btn">Create Account</button>
                <div id="regMessage" class="message"></div>
            </form>
            
            <!-- Login -->
            <form id="loginForm" class="form">
                <div class="input-group">
                    <label for="loginEmail">Email Address</label>
                    <input type="email" id="loginEmail" placeholder="Enter your email" required>
                    <i class="fas fa-envelope"></i>
                </div>
                <div class="input-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" placeholder="Enter your password" required>
                    <i class="fas fa-lock"></i>
                </div>
                <button type="submit" class="btn">Login to Account</button>
                <div id="loginMessage" class="message"></div>
            </form>
            
            <div class="info">
                <p>By signing up, you agree to our 
                   <a href="#">Terms of Service</a> and 
                   <a href="#">Privacy Policy</a></p>
            </div>
        </div>
    </div>

    <script>
        const tabs=document.querySelectorAll('.tab');
        const forms=document.querySelectorAll('.form');
        const registerForm=document.getElementById('registerForm');
        const loginForm=document.getElementById('loginForm');
        const regMessage=document.getElementById('regMessage');
        const loginMessage=document.getElementById('loginMessage');

        // Tab switch
        tabs.forEach(tab=>{
            tab.addEventListener('click',()=>{
                const tabName=tab.getAttribute('data-tab');
                tabs.forEach(t=>t.classList.remove('active'));
                tab.classList.add('active');
                forms.forEach(f=>{
                    f.classList.remove('active');
                    if(f.id===`${tabName}Form`) f.classList.add('active');
                });
                regMessage.style.display='none';
                loginMessage.style.display='none';
            });
        });

        // Register
        registerForm.addEventListener('submit',async e=>{
            e.preventDefault();
            const name=document.getElementById('regName').value;
            const username=document.getElementById('regUsername').value;
            const email=document.getElementById('regEmail').value;
            const password=document.getElementById('regPassword').value;

            if(!name||!username||!email||!password){
                return showMessage(regMessage,'Please fill in all fields','error');
            }
            showMessage(regMessage,'Creating your account...','info');
            try{
                const response=await fetch('http://localhost:3000/api/register',{
                    method:'POST',
                    headers:{'Content-Type':'application/json'},
                    body:JSON.stringify({name,username,email,password})
                });
                const data=await response.json();
                if(data.success){
                    showMessage(regMessage,data.message,'success');
                    registerForm.reset();
                    setTimeout(()=>{document.querySelector('[data-tab="login"]').click();},2000);
                }else{
                    showMessage(regMessage,data.message,'error');
                }
            }catch(err){
                showMessage(regMessage,'Server error, please try again.','error');
            }
        });

        // Login
        loginForm.addEventListener('submit',async e=>{
            e.preventDefault();
            const email=document.getElementById('loginEmail').value;
            const password=document.getElementById('loginPassword').value;

            if(!email||!password){
                return showMessage(loginMessage,'Please fill in all fields','error');
            }
            showMessage(loginMessage,'Logging in...','info');
            try{
                const response=await fetch('http://localhost:3000/api/login',{
                    method:'POST',
                    headers:{'Content-Type':'application/json'},
                    body:JSON.stringify({email,password})
                });
                const data=await response.json();
                if(data.success){
                    showMessage(loginMessage,data.message,'success');
                    loginForm.reset();
                    setTimeout(()=>{alert('Redirecting to dashboard...');},2000);
                }else{
                    showMessage(loginMessage,data.message,'error');
                }
            }catch(err){
                showMessage(loginMessage,'Server error, please try again.','error');
            }
        });

        function showMessage(el,text,type){
            el.textContent=text;
            el.className='message '+type;
            el.style.display='block';
        }
    </script>
</body>
</html>
